## Decorator Pattern

+ 개요
  + Object 에 기능을 추가해 나가는 패턴
  + 기능이나 속성을 추가할 때에는 주로 상속을 이용하여 서브 클래스를 만들지만, 
    사용자가 구성 요소를 언제 어디서 어떻게 구성할지 제어할 수 없기 때문에 상속이 아닌 Decorator (장식자) 를 사용해야함
    + Decorator (장식자) : 기존의 객체를 감싸서 다른 기능을 추가해주는 객체
    + 자신이 둘러싼 속성과 기능도 동일하게 제공하기 때문에 장식자의 존재는 사용자에게 감춰짐
    + 사용자가 기존 객체에 대한 요청을 중간에 가로채서 해당 객체에 전달하는 과정에서 전후 처리로 다른 작업을 추가할 수도 있고, 중첩될 수도 있음

<br>

+ 사용 시기
  + 객체의 타입과 호출 가능한 메서드를 그대로 유지하면서 새로운 기능을 추가할 때 사용
  + 탈부착 가능한 책임을 정의할 때 사용
  + 상속을 통해 서브 클래스를 만드는 것이 비효율적일 때 사용

<br>

+ 특징
  + 투과적인 인터페이스 (API)
    + 장식(decorator)과 내용물(Object)을 동일시하기 때문에 장식을 아무리 추가하여 기능이 추가되더라도 내용물의 인터페이스는 감출 수 없음
    + 따라서 Decorator 객체 안에 내용물이 있을 수도 있고, 또 다른 Decorator 가 있을 수도 있는, Composite Pattern 과 닮은 재귀적 구조가 등장함
  + 내용물을 바꾸지 않고 기능 추가 가능
    + Decorate Pattern 에서는 '위임' 을 사용하고 있어 내용물을 변경하지 않고 기능을 추가할 수 있음
    + 장식에 대한 요구는 내용물에 위임됨
  + 동적인 기능 추가 가능
    + 위임은 클래스 사이의 결합도를 낮추기 때문에 Framework 의 소스를 변경하지 않고 Object 의 관계를 변경한 새로운 Object 를 만들 수 있음 
  + 고려할 부분
    + 구현하려는 내용이 장식이 아닌 내용을 변경하려고 할 때에는 Strategy Pattern 이 더 적절함
    + Decorator 간에 서로 침범이 일어나면 안됨


<br>

+ 역할
  + Component
    + 기능을 추가할 때 핵심이 되는 역할로 인터페이스(API) 만을 결정함
    + 예제의 Display 클래스
  + ConcreteComponent
    + Component 역할의 인터페이스(API) 를 구현하고 있는 구현 클래스
    + 예제의 StringDisplay 클래스
  + Decorator
    + Component 와 동일한 인터페이스(API) 를 가지며, 원천 객체 대상도 가짐
    + 예제의 display 필드
  + ConcreteDecorator
    + 장식을 구현하는 클래스
    + 예제의 SideBorder, FullBorder 클래스

<br>

+ 예

| 클래스           | 설명                                                                                                                      |
|---------------|-------------------------------------------------------------------------------------------------------------------------|
| Display       | 복수 행으로 구성되는 문자열을 표시하기 위한 추상 클래스 <br> 추상 메서드를 이용한 스텝 별 알고리즘은 TemplateMethod Pattern                                      |
| StringDisplay | Display 클래스를 상속받은 1 행의 문자열을 표시하기 위한 하위 클래스 <br> getRowText 메서드 : row 가 0 일때에만 string(표시 문자열) 반환 <br> -> 최초 원천 객체 내용만 반환 |
| Border        | Decorator 추상 클래스로 문자열 표시를 실행하는 Display 클래스의 하위 클래스로 정의 <br> 상속에 의해 장식은 내용물과 동일한 메서드를 가짐                                 |
| SideBorder    | Border 의 구현 클래스로 borderChar 로 문자열을 장식함                                                                                  |
| FullBorder    | Border 의 구현 클래스로 문자열의 상하좌우에 장식함                                                                                         |